<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="966px" preserveAspectRatio="none" style="width:478px;height:966px;background:#FFFFFF;" version="1.1" viewBox="0 0 478 966" width="478px" zoomAndPan="magnify"><defs><filter height="300%" id="f13i89xhdrm1pb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f13i89xhdrm1pb)" height="247.9297" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="61.2969"/><rect fill="#FFFFFF" filter="url(#f13i89xhdrm1pb)" height="270.4063" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="366.3594"/><rect fill="#FFFFFF" height="117.0703" style="stroke:none;stroke-width:1.0;" width="454.5" x="10" y="387.4922"/><rect fill="#FFFFFF" height="132.2031" style="stroke:none;stroke-width:1.0;" width="454.5" x="10" y="504.5625"/><rect fill="#FFFFFF" filter="url(#f13i89xhdrm1pb)" height="102.5313" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="650.7656"/><rect fill="#FFFFFF" filter="url(#f13i89xhdrm1pb)" height="134.5313" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="767.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="44.2969" y2="82.4297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="82.4297" y2="114.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="114.4297" y2="195.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="195.8281" y2="227.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="227.8281" y2="472.5625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="472.5625" y2="504.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="504.5625" y2="604.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="604.7656" y2="636.7656"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="636.7656" y2="869.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="869.8281" y2="901.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="901.8281" y2="918.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="356.5" y1="44.2969" y2="82.4297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="356.5" x2="356.5" y1="82.4297" y2="114.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="356.5" y1="114.4297" y2="195.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="356.5" x2="356.5" y1="195.8281" y2="227.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="356.5" y1="227.8281" y2="472.5625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="356.5" x2="356.5" y1="472.5625" y2="504.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="356.5" y1="504.5625" y2="604.7656"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="356.5" x2="356.5" y1="604.7656" y2="636.7656"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="356.5" y1="636.7656" y2="869.8281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="356.5" x2="356.5" y1="869.8281" y2="901.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="356.5" y1="901.8281" y2="918.8281"/><rect fill="#FEFECE" filter="url(#f13i89xhdrm1pb)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="70" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="79" y="26.9951">FHIR Server</text><rect fill="#FEFECE" filter="url(#f13i89xhdrm1pb)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="70" y="917.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="79" y="939.8232">FHIR Server</text><rect fill="#FEFECE" filter="url(#f13i89xhdrm1pb)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="308.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="317.5" y="26.9951">Subscriber</text><rect fill="#FEFECE" filter="url(#f13i89xhdrm1pb)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="308.5" y="917.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="317.5" y="939.8232">Subscriber</text><path d="M10,61.2969 L190,61.2969 L190,72.2969 L180,82.2969 L10,82.2969 L10,61.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="247.9297" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="61.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="131" x="27" y="76.3638">Normal Operation</text><polygon fill="#A80036" points="344.5,150.6953,354.5,154.6953,344.5,158.6953,348.5,154.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120.5" x2="350.5" y1="154.6953" y2="154.6953"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="144" x="129.5" y="132.4966">event-notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="129.5" y="147.6294">event number:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="227.5" y="147.6294">21</text><polygon fill="#A80036" points="131.5,183.8281,121.5,187.8281,131.5,191.8281,127.5,187.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="125.5" x2="355.5" y1="187.8281" y2="187.8281"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="139.5" y="180.7622">200: OK</text><polygon fill="#A80036" points="344.5,264.0938,354.5,268.0938,344.5,272.0938,348.5,268.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120.5" x2="350.5" y1="268.0938" y2="268.0938"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="144" x="129.5" y="245.895">event-notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="129.5" y="261.0278">event number:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="227.5" y="261.0278">23</text><polygon fill="#A80036" points="131.5,297.2266,121.5,301.2266,131.5,305.2266,127.5,301.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="125.5" x2="355.5" y1="301.2266" y2="301.2266"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="139.5" y="294.1606">200: OK</text><path d="M48,321.2266 L48,350.2266 L347,350.2266 L347,331.2266 L337,321.2266 L48,321.2266 " fill="#FBFB77" filter="url(#f13i89xhdrm1pb)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M337,321.2266 L337,331.2266 L347,331.2266 L337,321.2266 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="56" y="340.2935">Subscriber determines event</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="245" y="340.2935">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="267" y="340.2935">is missing</text><path d="M10,366.3594 L189,366.3594 L189,377.3594 L179,387.3594 L10,387.3594 L10,366.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="270.4063" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="366.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="27" y="381.4263">Recovery Process</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="464.5" y1="388.4922" y2="388.4922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="17" y="400.7026">[via FHIR REST]</text><polygon fill="#A80036" points="131.5,427.4297,121.5,431.4297,131.5,435.4297,127.5,431.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="355.5" y1="431.4297" y2="431.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="139.5" y="424.3638">FHIR Search</text><polygon fill="#A80036" points="344.5,460.5625,354.5,464.5625,344.5,468.5625,348.5,464.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120.5" x2="350.5" y1="464.5625" y2="464.5625"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="129.5" y="457.4966">Bundle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="181.5" y="457.4966">with matching resources</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="464.5" y1="505.5625" y2="505.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="24" x="17" y="517.7729">[via</text><text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="45" y="517.7729">$events</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="94" y="517.7729">]</text><polygon fill="#A80036" points="131.5,559.6328,121.5,563.6328,131.5,567.6328,127.5,563.6328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="355.5" y1="563.6328" y2="563.6328"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="139.5" y="541.4341">$events</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="195.5" y="541.4341">:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="139.5" y="556.5669">Events newer than</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="261.5" y="556.5669">21</text><polygon fill="#A80036" points="344.5,592.7656,354.5,596.7656,344.5,600.7656,348.5,596.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120.5" x2="350.5" y1="596.7656" y2="596.7656"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="129.5" y="589.6997">Bundle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="181.5" y="589.6997">with matching events</text><path d="M10,650.7656 L230,650.7656 L230,661.7656 L220,671.7656 L10,671.7656 L10,650.7656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="102.5313" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="650.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="171" x="27" y="665.8325">Re-enable Subscription</text><polygon fill="#A80036" points="131.5,708.1641,121.5,712.1641,131.5,716.1641,127.5,712.1641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="355.5" y1="712.1641" y2="712.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="139.5" y="689.9653">Update Subscription</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="139.5" y="705.0981">state: active</text><polygon fill="#A80036" points="344.5,741.2969,354.5,745.2969,344.5,749.2969,348.5,745.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120.5" x2="350.5" y1="745.2969" y2="745.2969"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="129.5" y="738.231">200: OK</text><path d="M10,767.2969 L254,767.2969 L254,778.2969 L244,788.2969 L10,788.2969 L10,767.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="134.5313" style="stroke:#000000;stroke-width:2.0;" width="454.5" x="10" y="767.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="195" x="27" y="782.3638">Resume Normal Operation</text><polygon fill="#A80036" points="344.5,824.6953,354.5,828.6953,344.5,832.6953,348.5,828.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120.5" x2="350.5" y1="828.6953" y2="828.6953"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="144" x="129.5" y="806.4966">event-notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="129.5" y="821.6294">event number:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="227.5" y="821.6294">24</text><polygon fill="#A80036" points="131.5,857.8281,121.5,861.8281,131.5,865.8281,127.5,861.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="125.5" x2="355.5" y1="861.8281" y2="861.8281"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="139.5" y="854.7622">200: OK</text><!--MD5=[06b675cfd25b32650a20b09cb5ab2db6]
@startuml
skinparam NoteTextAlignment left
skinparam Padding 2
skinparam ParticipantPadding 50
skinparam LifelineStrategy solid

participant "FHIR Server" as S
participant Subscriber    as C

group Normal Operation
  ...
  S -> C: ""event-notification""\nevent number: **21**
  return ""200: OK""
  ...
  S -> C: ""event-notification""\nevent number: **23**
  return ""200: OK""
end

note left of C
  Subscriber determines event **22** is missing
end note

group Recovery Process
else via FHIR REST
  C -> S: FHIR Search
  return ""Bundle"" with matching resources
  ...
else via ""$events""
  C -> S: ""$events"":\nEvents newer than **21**
  return ""Bundle"" with matching events
  ...

end

group Re-enable Subscription
  C -> S:Update Subscription\n""state: active""
  return ""200: OK""
end

group Resume Normal Operation
  S -> C: ""event-notification""\nevent number: **24**
  return ""200: OK""
  ...
end
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>